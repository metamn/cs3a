/* https://developers.google.com/web/fundamentals/look-and-feel/animations/animating-between-views
*/


@mixin slider($type: stacked) {
  width: 100%;
  height: 100%;
  overflow: hidden;
  position: relative;
  
  .slide {
    width: 100%;
    height: 100%;
    position: absolute;
    left: 0;
    top: 0;

    /* let the browser know we plan to animate
       each view in and out */
    will-change: transform;
    
    // This will push out the slides right of the viewport
    @include slider-arrangement($type);
    
    // there is a bug in compass and can't do @include transition(transform(.....)) 
    transition: -webkit-transform 0.3s cubic-bezier(0.465, 0.183, 0.153, 0.946);
    transition: transform 0.3s cubic-bezier(0.465, 0.183, 0.153, 0.946);
  }
  
  // This brings back the slide
  .active {
    @include transform(translateX(0px));
  }
  
  
  // This scrolls left and right the slides
  @for $i from 1 through 5 {
    &.left-#{$i} {
      .slide {
        @include move-slides($i);
      }
    }
    
    &.right-#{$i} {
      .slide {
        @include move-slides($i, right);
      }
    }
  }
  
}




@mixin slider-arrangement($type) {
  @if ($type == stacked) {
    // - each slide is stacked, like a pack of cards, one upon the another
    @include transform(translateX(100%));
  
  } @elseif ($type == aligned) {
    // Each slide is aligned left
    // - some are visible, some invisible depending on the viewport width
    // - it's like cards arranged in a row
    @include move-slides(0);
  }
}


@mixin move-slides($index, $direction: left) {
  @for $i from 1 through 4 {
    &:nth-of-type(#{$i}) {
      @if ($direction == left) {
        @include transform(translateX(calc(100% * #{$i - $index - 1})));
      } @else {
        @include transform(translateX(calc(100% * #{$i - $index + 1})));
      }
      
    }
  }
}